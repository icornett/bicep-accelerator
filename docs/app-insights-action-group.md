# app-insights-action-group br:slalombicepregistry.azurecr.io/bicep/modules/app-insights-action-group:v1.0

## Parameters

| Parameter Name                  | Parameter Type | Parameter Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | Parameter DefaultValue | Parameter AllowedValues |
| ------------------------------- | -------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ---------------------- | ----------------------- |
| armRoleReceiversArray           | array          | The list of ARM role receivers that are part of this action group. Roles are Azure RBAC roles and only built-in roles are supported.<br/>Receiver objects contain the following required properties:<br/>`name`: `string` The name of the arm role receiver. Names must be unique across all receivers within an action group.<br/>`roleId`: `string` The arm role id.<br/>`useCommonAlertSchema`: (optional) `bool` Indicates whether to use common alert schema. (defaults to `true` if not provided)<br/>                                                                                                                                                                                                                                                                    |                        |                         |
| automationRunbookReceiversArray | array          | The list of AutomationRunbook receivers that are part of this action group.<br/>Receiver objects contain the following properties:<br/>`automationAccountId`: `string` The Azure automation account Id which holds this runbook and authenticate to Azure resource.<br/>`isGlobalRunbook`: `bool` Indicates whether this instance is global runbook.<br/>`name`: (optional) `string` Indicates name of the webhook.<br/>`runbookName`: `string` The name for this runbook.<br/>`serviceUri`: (optional) The URI where webhooks should be sent.<br/>`useCommonAlertSchema`: (optional) `bool` Indicates whether to use common alert schema. (defaults to `true` if not provided)<br/>`webhookResourceId`: `string` The resource id for webhook linked to this runbook.<br/>      |                        |                         |
| azureAppPushReceiversArray      | array          | The list of AzureAppPush receivers that are part of this action group.<br/>Receiver objects contain:<br/>`emailAddress`: `string` The email address registered for the Azure mobile app.<br/>`name`: `string` The name of the Azure mobile app push receiver. Names must be unique across all receivers within an action group.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                            |                        |                         |
| azureFunctionsReceiversArray    | array          | The list of azure function receivers that are part of this action group.<br/><br/>Receiver objects contain:<br/>`functionAppResourceId`: `string` The azure resource id of the function app.<br/>`functionName`: `string` The function name in the function app.<br/>`httpTriggerUrl`: `string` The http trigger url where http request sent to.<br/>`name`: `string` The name of the azure function receiver. Names must be unique across all receivers within an action group.<br/>`useCommonAlertSchema`: (optional) `bool` Indicates whether to use common alert schema. (defaults to `true` if not provided)<br/>                                                                                                                                                          |                        |                         |
| emailReceiversArray             | array          | The list of email receivers that are part of this action group.<br/>Receiver objects contain the following:<br/>`emailAddress`: `string` The email address of this receiver.<br/>`name`: `string` The name of the email receiver. Names must be unique across all receivers within an action group.<br/>`useCommonAlertSchema`: (optional) `bool` Indicates whether to use common alert schema. (defaults to `true` if not provided)<br/>                                                                                                                                                                                                                                                                                                                                       |                        |                         |
| enabled                         | bool           | Indicates whether this action group is enabled. If an action group is not enabled, then none of its receivers will receive communications.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | True                   |                         |
| eventHubReceiversArray          | array          | The list of event hub receivers that are part of this action group.<br/>Receiver objects contain:<br/>`eventHubName`: `string` The name of the specific Event Hub queue<br/>`eventHubNameSpace`: `string` The Event Hub namespace<br/>`name`: `string` The name of the Event hub receiver. Names must be unique across all receivers within an action group<br/>`subscriptionId`: `string` The Id for the subscription containing this event hub<br/>`tenantId`: (optional) `string` The tenant Id for the subscription containing this event hub<br/>`useCommonAlertSchema`: (optional) `bool` Indicates whether to use common alert schema. (defaults to `true` if not provided)<br/>                                                                                         |                        |                         |
| groupShortName                  | string         | The short name of the action group. This will be used in SMS messages.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |                        |                         |
| insightsName                    | string         | The name of the Application Insights instance to bind the action group to                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |                        |                         |
| itsmReceiversArray              | array          | The list of ITSM receivers that are part of this action group.<br/><br/>Receiver objects contain:<br/>`connectionId`: `string` Unique identification of ITSM connection among multiple defined in above workspace.<br/>`name`: `string` The name of the Itsm receiver. Names must be unique across all receivers within an action group.<br/>`region`: `string` Region in which workspace resides. Supported values:'centralindia','japaneast','southeastasia','australiasoutheast','uksouth','westcentralus','canadacentral','eastus','westeurope'<br/>`ticketConfiguration`: `string` JSON blob for the configurations of the ITSM action. CreateMultipleWorkItems option will be part of this blob as well.<br/>`workspaceId`: `string` OMS LA instance identifier.<br/>     |                        |                         |
| location                        | string         | The location to deploy the action group                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | global                 |                         |
| logicAppReceiversArray          | array          | The list of logic app receivers that are part of this action group.<br/><br/>Receiver objects contain:<br/>`callbackUrl`: `string` The callback url where http request sent to.<br/>`name`: `string` The name of the logic app receiver. Names must be unique across all receivers within an action group.<br/>`resourceId` : `string` The azure resource id of the logic app receiver.<br/>`useCommonAlertSchema`: (optional) `bool` Indicates whether to use common alert schema. (defaults to `true` if not provided)<br/>                                                                                                                                                                                                                                                   |                        |                         |
| smsReceiversArray               | array          | The list of SMS receivers that are part of this action group.<br/><br/>Receiver objects contain:<br/>`countryCode`: `string` The country code of the SMS receiver.<br/>`name`: `string` The name of the SMS receiver. Names must be unique across all receivers within an action group.<br/>`phoneNumber`: `string` The phone number of the SMS receiver.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                  |                        |                         |
| tags                            | object         | A mapping of tags to assign to the action group                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |                        |                         |
| voiceReceiversArray             | array          | The list of voice receivers that are part of this action group.<br/><br/>Receiver objects contain:<br/>`countryCode`: `string` The country code of the voice receiver.<br/>`name`: `string` The name of the voice receiver. Names must be unique across all receivers within an action group.<br/>`phoneNumber`: `string` The phone number of the voice receiver.<br/>                                                                                                                                                                                                                                                                                                                                                                                                          |                        |                         |
| webhookReceiversArray           | array          | The list of webhook receivers that are part of this action group.<br/><br/>Receiver objects contain:<br/>`identifierUri`: (optional) `string` Indicates the identifier uri for aad auth.<br/>`name`: `string` The name of the webhook receiver. Names must be unique across all receivers within an action group.<br/>`objectId`: (optional) `string` Indicates the webhook app object Id for aad auth.<br/>`serviceUri`: `string` The URI where webhooks should be sent.<br/>`tenantId`: (optional) `string` Indicates the tenant id for aad auth.<br/>`useAadAuth` : (optional) `bool` Indicates whether or not use AAD authentication.<br/>`useCommonAlertSchema`: (optional) `bool` Indicates whether to use common alert schema. (defaults to `true` if not provided)<br/> |                        |                         |

## Resources

| Deployment Name | Resource Type                   | Resource Version | Existing | Resource Comment |
| --------------- | ------------------------------- | ---------------- | -------- | ---------------- |
| actionGroup     | Microsoft.Insights/actionGroups | 2022-06-01       | False    |                  |

## Outputs

| Output Name | Output Type | Output Value                                                                                  |
| ----------- | ----------- | --------------------------------------------------------------------------------------------- |
| groupId     | string      | [resourceId('Microsoft.Insights/actionGroups', format('ag-{0}', parameters('insightsName')))] |
